<!DOCTYPE html>
<html lang="it-IT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoolzApp</title>

    <!-- fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- css -->
    <link rel="stylesheet" href="./css/style.css">

</head>
<body>
    <!-- VUE 3 -->
    <script src="https://unpkg.com/vue@3"></script>

    <div id="app">


        <!-- HEADER vuoto -->
        <div id="header-empty"></div>

        <main>
            <!-- Parte laterale con anteprime chat -->
            <section id="chats-overview">

                <!-- Profilo personale -->
                <div id="my-profile">

                    <div class="my-img">
                        <img src="./img/avatar_io.jpg" alt="me stesso">
                        <span>Elisa</span>
                    </div>

                    <div class="pr-icons">
                        <i class="fa-solid fa-circle-notch"></i>
                        <i class="fa-solid fa-message"></i>
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>

                </div>

                <!-- Ricevi notifiche -->
                <div id="notific-received">

                    <div class="bell">
                        <i class="fa-solid fa-bell-slash"></i>
                    </div>

                    <div>
                        <div>Ricevi notifiche di nuovi messaggi</div>
                        <a href="*">Attiva notifiche dekstop</a>
                    </div>
                </div>

                <!-- Filtro -->
                <div id="chats-filter">
                    <button>
                        <i 
                            @click="searchFriend()"
                            class="fa-solid fa-magnifying-glass"
                        ></i>
                    </button>
                    <input 
                        @keyup.enter="searchFriend()"
                        v-model="searchedString"
                        type="text"
                        placeholder="Cerca o inizia una nuova chat"
                    >

                </div>

                <!-- tutte le chats -->
                <div id="chats">

                   <div class="single-chat"
                        v-for="(contact, index) in filteredContacts"
                        @click="showConversation(index)"

                   > 
                        <div id="friend"> 
                            <img :src="contact.avatar" alt="me stesso">
                            <div>
                                <div class="friend-name">{{ contact.name }}</div>
                                <div class="last-mess">Ultimo messaggio inviato</div>
                            </div>
                        </div>

                        <div class="time-message">
                            12:00
                        </div>

                    </div>


                </div>

            </section>

            <!-- Chat aperta -->
            <section id="open-chat">

                <!-- Header chat -->
                <div class="friend-opened"> 

                    <div class="info-opened-friend">
                        <img :src="filteredContacts[indexForFriend].avatar" alt="filteredContacts[indexForFriend].name">
                        <div class="testo-friend">
                            <div class="friend-name">{{ filteredContacts[indexForFriend].name }}</div>
                            <div class="last-message">
                                Ultimo messaggio oggi alle 
                            <span class="time-message">12:00</span>
                            </div>
                        </div>
                    </div>



                    <div class="pr-icons">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <i class="fa-solid fa-paperclip"></i>
                        <i class="fa-solid fa-ellipsis-vertical"></i>
                    </div>


                </div>

                <!-- Corpo messaggi -->
                <div id="open-messages">

                    <div class="container">

                        <div class="message"
                            v-for="currentMessage in filteredContacts[indexForFriend].messages"
                            :class="currentMessage.status"
                        > 
                            <div class="text" >
                                {{currentMessage.message}}
                            </div>
                            
                            <div class="time">
                                {{currentMessage.date}}
                            </div>
 
                        </div>

                    </div>


                </div>

                <!-- scrivi messaggio-->
                <div id="write-message">
                    <div class="left-part-mess">
                        <i class="fa-regular fa-face-smile"></i>
                    </div>

                    <div class="central-part-mess">
                        <input
                            type="text" 
                            placeholder="Scrivi un messaggio"
                            @keyup.enter="addMessage()"
                            v-model="myMessage"
                        >
                    </div>

                    <button class="right-part-mess">
                        <i class="fa-solid fa-microphone" @click="addMessage()"></i>
                    </button>

                </div>

            </section>

        </main>

        

    </div>

    <script src="./js/script.js"></script>

</body>
</html>